/** @license React vundefined
 * react-events-press.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */

'use strict';var q=require("react"),r="undefined"!==typeof window&&void 0!==window.PointerEvent,t="undefined"!==typeof window&&null!=window.navigator?/^Mac/.test(window.navigator.platform):!1,u={bottom:20,top:20,left:20,right:20},w=r?"pointerup pointermove pointercancel click keyup scroll".split(" "):"click keyup scroll mousemove touchmove touchcancel dragstart mouseup_active touchend".split(" ");function x(b){return"function"===typeof b}
function y(b,c,d,a,f,h){var e=a.pressTarget,g=a.pointerType,k=a.touchEvent,m=null!=b&&!0===b.nativeEvent.defaultPrevented||"press"===f&&a.shouldPreventClick,p=d.getTimeStamp(),n=null,l=null,v=null,A=null,B=null,C=null,D=!1,E=!1,F=!1,G=!1;b&&(b=b.nativeEvent,D=b.altKey,E=b.ctrlKey,F=b.metaKey,G=b.shiftKey,k=k||b)&&(n=k.clientX,l=k.clientY,v=k.pageX,A=k.pageY,B=k.screenX,C=k.screenY);d.dispatchEvent({altKey:D,buttons:a.buttons,clientX:n,clientY:l,ctrlKey:E,defaultPrevented:m,metaKey:F,pageX:v,pageY:A,
pointerType:g,screenX:B,screenY:C,shiftKey:G,target:e,timeStamp:p,type:f,x:n,y:l},c,h)}function z(b,c,d,a){a.isPressed=!0;if(!a.isActivePressStart){a.isActivePressStart=!0;var f=b.nativeEvent,h=a.touchEvent||f;f=h.clientX;var e=h.clientY;h=a.isActivePressed;a.isActivePressed=!0;void 0!==f&&void 0!==e&&(a.activationPosition={x:f,y:e});f=d.onPressStart;x(f)&&y(b,f,c,a,"pressstart",0);h||(b=d.onPressChange,x(b)&&c.dispatchEvent(a.isActivePressed,b,0))}}
function H(b,c,d,a){a.isActivePressStart=!1;a.isPressed=!1;if(a.isActivePressed){a.isActivePressed=!1;var f=d.onPressEnd;x(f)&&y(b,f,c,a,"pressend",0);b=d.onPressChange;x(b)&&c.dispatchEvent(a.isActivePressed,b,0)}a.responderRegionOnDeactivation=null}function I(b){var c=b.key,d=b.target;b=d.tagName;d=d.isContentEditable;return("Enter"===c||" "===c||"Spacebar"===c)&&"INPUT"!==b&&"TEXTAREA"!==b&&!0!==d}
function J(b,c,d){b=b.objectAssign({},u,d.pressRetentionOffset);var a=c.getBoundingClientRect();c=a.left;d=a.right;var f=a.bottom;a=a.top;b&&(null!=b.bottom&&(f+=b.bottom),null!=b.left&&(c-=b.left),null!=b.right&&(d+=b.right),null!=b.top&&(a-=b.top));return{bottom:f,top:a,left:c,right:d}}function K(b,c){c.addedRootEvents&&(c.addedRootEvents=!1,b.removeRootEventTypes(w))}function L(b,c){b=b.changedTouches;for(var d=0;d<b.length;d++){var a=b[d];if(a.identifier===c)return a}return null}
function M(b,c,d,a){null==a.responderRegionOnDeactivation&&(a.responderRegionOnDeactivation=J(c,a.pressTarget,d));c=a.responderRegionOnActivation;d=a.responderRegionOnDeactivation;if(null!=c){var f=c.left;var h=c.top;var e=c.right;var g=c.bottom;null!=d&&(f=Math.min(f,d.left),h=Math.min(h,d.top),e=Math.max(e,d.right),g=Math.max(g,d.bottom))}c=b.clientX;b=b.clientY;a.isPressWithinResponderRegion=null!=f&&null!=e&&null!=h&&null!=g&&null!==c&&null!==b&&c>=f&&c<=e&&b>=h&&b<=g}
var N=q.unstable_createResponder("Press",{targetEventTypes:r?["keydown_active","pointerdown_active","click_active"]:["keydown_active","touchstart","mousedown","click_active"],getInitialState:function(){return{activationPosition:null,addedRootEvents:!1,buttons:0,isActivePressed:!1,isActivePressStart:!1,isPressed:!1,isPressWithinResponderRegion:!0,pointerType:"",pressTarget:null,responderRegionOnActivation:null,responderRegionOnDeactivation:null,ignoreEmulatedMouseEvents:!1,activePointerId:null,shouldPreventClick:!1,
touchEvent:null}},onEvent:function(b,c,d,a){var f=b.pointerType,h=b.type;if(d.disabled)K(c,a),H(b,c,d,a),a.ignoreEmulatedMouseEvents=!1;else{var e=b.nativeEvent,g=a.isPressed;!0===d.stopPropagation&&e.stopPropagation();switch(h){case "pointerdown":case "keydown":case "mousedown":case "touchstart":if(g)I(e)&&" "===e.key&&e.preventDefault();else{var k="touchstart"===h,m="pointerdown"===h,p="keyboard"===f;g="mouse"===f;if("mousedown"!==h||!a.ignoreEmulatedMouseEvents){a.shouldPreventClick=!1;if(k)a.ignoreEmulatedMouseEvents=
!0;else if(p)if(I(e)){h=e.altKey;p=e.ctrlKey;var n=e.metaKey,l=e.shiftKey;" "===e.key?e.preventDefault():!1===d.preventDefault||l||n||p||h||(a.shouldPreventClick=!0)}else break;a.pointerType=f;f=a.pressTarget=c.getResponderNode();if(m)a.activePointerId=e.pointerId;else if(k){k=e.targetTouches;k=0<k.length?k[0]:null;if(null===k)break;a.touchEvent=k;a.activePointerId=k.identifier}2===e.buttons||4<e.buttons||t&&g&&e.ctrlKey||(null!==f&&9!==f.nodeType&&(a.responderRegionOnActivation=J(c,f,d)),a.responderRegionOnDeactivation=
null,a.isPressWithinResponderRegion=!0,a.buttons=e.buttons,z(b,c,d,a),a.addedRootEvents||(a.addedRootEvents=!0,c.addRootEventTypes(w)))}}break;case "click":a.shouldPreventClick&&e.preventDefault(),g=d.onPress,x(g)&&0===e.detail&&0===e.screenX&&0===e.screenY&&0===e.clientX&&0===e.clientY&&(a.pointerType="keyboard",a.pressTarget=c.getResponderNode(),!1!==d.preventDefault&&e.preventDefault(),y(b,g,c,a,"press",0))}}},onRootEvent:function(b,c,d,a){var f=b.pointerType,h=b.target,e=b.type,g=b.nativeEvent,
k=a.isPressed,m=a.activePointerId,p=a.pointerType;!0===d.stopPropagation&&g.stopPropagation();switch(e){case "pointermove":case "mousemove":case "touchmove":if(p!==f)break;if("pointermove"===e&&m!==g.pointerId)break;else if("touchmove"===e){var n=L(g,m);if(null===n)break;a.touchEvent=n}var l=a.pressTarget;null!==l&&null!==l&&9!==l.nodeType&&("mouse"===f&&c.isTargetWithinNode(h,l)?a.isPressWithinResponderRegion=!0:M(n||g,c,d,a));a.isPressWithinResponderRegion?k?(d=d.onPressMove,x(d)&&y(b,d,c,a,"pressmove",
1)):z(b,c,d,a):H(b,c,d,a);break;case "pointerup":case "keyup":case "mouseup":case "touchend":if(k){if(k=a.buttons,n=!1,"pointerup"!==e||m===g.pointerId){if("touchend"===e){l=L(g,m);if(null===l)break;h=a.touchEvent=l;h=c.getActiveDocument().elementFromPoint(h.clientX,h.clientY)}else if("keyup"===e){if(!I(g))break;n=!0;K(c,a)}else 4===k&&K(c,a);if(c.isTargetWithinResponder(h)&&c.isTargetWithinHostComponent(h,"a")){e=g.altKey;m=g.ctrlKey;p=g.metaKey;var v=g.shiftKey;!1===d.preventDefault||v||p||m||e||
(a.shouldPreventClick=!0)}e=a.pressTarget;H(b,c,d,a);m=d.onPress;null!==e&&x(m)&&(n||null===e||null===e||9===e.nodeType||("mouse"===f&&c.isTargetWithinNode(h,e)?a.isPressWithinResponderRegion=!0:M(l||g,c,d,a)),a.isPressWithinResponderRegion&&4!==k&&y(b,m,c,a,"press",0));a.touchEvent=null}}else"mouseup"===e&&(a.ignoreEmulatedMouseEvents=!1);break;case "click":"keyboard"!==p&&K(c,a);break;case "scroll":if("mouse"===p)break;f=a.pressTarget;g=g.target;h=c.getActiveDocument();null===f||g!==h&&!c.isTargetWithinNode(f,
g)||(a.touchEvent=null,a.isPressed&&(a.ignoreEmulatedMouseEvents=!1,H(b,c,d,a)),K(c,a));break;case "pointercancel":case "touchcancel":case "dragstart":a.touchEvent=null,a.isPressed&&(a.ignoreEmulatedMouseEvents=!1,H(b,c,d,a)),K(c,a)}},onUnmount:function(b,c,d){d.isPressed&&(K(b,d),H(null,b,c,d))}});module.exports={PressResponder:N,usePress:function(b){return q.unstable_useResponder(N,b)}};
