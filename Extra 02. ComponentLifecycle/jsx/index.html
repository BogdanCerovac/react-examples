<!DOCTYPE html>
<html>
    <head>
        <title>Extra 02. ComponentLifecycle (jsx)</title>
        <script src="http://fb.me/react-0.12.2.js"></script>
        <script src="http://fb.me/JSXTransformer-0.12.2.js"></script>
    </head>
    <body>
        <div id="app"></div>

        <script type="text/jsx">
            var Hello = React.createClass({
                render: function () {
                    console.log('render() - props: ' + JSON.stringify(this.props) + " state: " + JSON.stringify(this.state));
                    return (<h1>Hello {this.props.name}! ({this.state.count} time)</h1>);
                },

                // Mounting
                getDefaultProps: function () {
                    var result = null;
                    console.log('getDefaultProps(): ' + JSON.stringify(result));
                    return result;
                },
                getInitialState: function () {
                    var result = {count: 1};
                    console.log('getInitialState(): ' + JSON.stringify(result));
                    return result;
                },
                componentWillMount: function () {
                    console.log('componentWillMount()');
                },
                componentDidMount: function () {
                    console.log('componentDidMount()');
                },

                // Updating
                componentWillReceiveProps: function (nextProps) {
                    console.log('componentWillReceiveProps(nextProps: ' + JSON.stringify(nextProps) + ')');
                },
                shouldComponentUpdate: function (nextProps, nextState) {
                    console.log('shouldComponentUpdate(nextProps: ' + JSON.stringify(nextProps) + ', nextState: ' + JSON.stringify(nextState) + '): boolean');
                    return true;
                },
                componentWillUpdate: function (nextProps, nextState) {
                    console.log('componentWillUpdate(nextProps: ' + JSON.stringify(nextProps) + ', nextState: ' + JSON.stringify(nextState) + ')');
                },
                componentDidUpdate: function (prevProps, prevState) {
                    console.log('componentDidUpdate(prevProps: ' + JSON.stringify(prevProps) + ', prevState: ' + JSON.stringify(prevState) + ')');
                    if (prevProps.name === "Number One") {
                        this.setState({count: this.state.count + 1});
                    }
                },

                // Unmounting
                componentWillUnmount: function () {
                    console.log('componentWillUnmount()');
                }
            });

            var App = React.createClass({
                getInitialState: function() {
                    return {
                        name: 'Number One'
                    }
                },
                componentDidMount: function() {
                    this.setState({name: 'Number Two'});
                },
                render: function() {
                    return <Hello name={this.state.name} />;
                }
            });

            React.render(
                <App />,
                document.getElementById('app')
            );

            React.unmountComponentAtNode(
                document.getElementById('app')
            );
        </script>
    </body>
</html>
